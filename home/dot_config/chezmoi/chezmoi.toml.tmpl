{{ $mise := joinPath .chezmoi.homeDir ".local/bin/mise" -}}
{{ $output := output "sh" "-c" (print $mise " exec aqua:cli/cli -- gh api user 2>/dev/null || true") -}}
{{- $login := "" -}}
{{- $name := "" -}}
{{- $id := "" -}}
{{- if $output }}
{{- with (fromJson $output) }}
{{- if .login }}
{{- $login = .login -}}
{{- end }}
{{- if .name }}
{{- $name = .name -}}
{{- end }}
{{- if .id }}
{{- $id = printf "%v" .id -}}
{{- end }}
{{- end }}
{{- end }}

[data.github]
    id = {{ $id | quote }}
    name = {{ $name | quote }}
    login = {{ $login | quote }}

[git]
    autoCommit = true
    autoPush = true
